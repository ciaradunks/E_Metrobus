{% extends "base.html" %}

{% load static %}
{% load i18n %}

{% block subtitle %} - {% trans 'Start' %}{% endblock %}

{% block body_class %}class="l-scroll l-scroll--nonav"{% endblock %}

{% block content %}
  <div class="cell">
    <div class="grid-x align-center text-center landpage">
      <div class="cell landpage__button" {% if visited %}style="animation: none"{% endif %}>
        <div class="grid-x">
          <div id="animateLPText" class="cell landpage__button-text">
            <span>{% trans 'Toll, dass du mit einem E-Bus f√§hrst!' %}</span>
          </div>
          <div class="cell landing__button-btn">
            <a href="{% url 'navigation:route' %}"><button id="animateLPButton" name="boarding" class="button" {% if visited %}style="animation: none"{% endif %}>{% trans 'Zeig mir warum!' %}</button></a>
          </div>
          <div class="cell landpage__language">
            <div class="grid-x align-center text-center">
              <div class="cell small-10 landpage__language--switch" {% if visited %}style="animation: none"{% endif %}>
                {% get_current_language as LANGUAGE_CODE %}
                {% if LANGUAGE_CODE == "de" %}
                  <a href="en/?visited" data-open="language_popup" onclick="send_posthog_event('english');">
                    <img src="{% static 'images/icons/i_flag_uk.svg' %}" alt="uk_flag">
                    <span>Switch to English</span>
                  </a>
                {% else %}
                  <a href="/?visited" data-open="language_popup">
                    <img src="{% static 'images/icons/i_flag_de.svg' %}" alt="uk_flag">
                    <span>Zu Deutsch wechseln</span>
                  </a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="cell landpage__bottom">
        <div class="grid-x">
          <div class="cell small-4 landpage__logo landpage__logo--bvg" {% if visited %}style="animation: none"{% endif %}>
            <a href="https://www.bvg.de/de">
              <img src="{% static 'images/logos/Logo_BVG.png' %}" alt="BVG Logo">
            </a>
          </div>
          <div class="cell small-4 landpage__logo landpage__logo--tu" {% if visited %}style="animation: none"{% endif %}>
            <a href="https://www.mpm.tu-berlin.de/menue/home/">
              <img src="{% static 'images/logos/TU-Berlin_logo.png' %}" alt="TU Berlin Logo">
            </a>
          </div>
          <div class="cell small-4 landpage__logo landpage__logo--rli" {% if visited %}style="animation: none"{% endif %}>
            <a href="https://reiner-lemoine-institut.de/">
              <img src="{% static 'images/logos/RLi_logo.png' %}" alt="RLI Logo">
            </a>
          </div>
          <div class="cell landpage__logo landpage__logo--bmwi" {% if visited %}style="animation: none"{% endif %}>
            <img src="{% static 'images/logos/Logokombi_gefoerdert-durch-BMVI-koordiniert-durch-NOW_de.png' %}" alt="BMWI und NOW Logo">
          </div>
        </div>
      </div>
    </div>
  </div>

  {% if not privacy_accepted %}
    <div class="privacypop pop" id="privacy_popup">
      <p>Hinweis: Unsere Website sammelt keine personenbezogenen Daten.</p>
      <button id="pricacyButton" class="button button--small button--yellow close" onclick="privacy_policy_accepted();">{% trans 'Okay' %}</button>
    </div>
  {% endif %}
{% endblock content %}

{% block javascript %}
  {{block.super}}
  <script>
    function deselect(e) {
      $('.pop').slideFadeToggle(function() {
        e.removeClass('selected');
      });
    }

    $(function() {
      $('.close').on('click', function() {
        deselect($('#contact'));
        return false;
      });
    });

    $.fn.slideFadeToggle = function(easing, callback) {
      return this.animate({ opacity: 'toggle', height: 'toggle' }, 'fast', easing, callback);
    };

    function privacy_policy_accepted() {
      $.ajax({
        url: "/accept_privacy_policy/",
        dataType: "html"
      });
    }
  </script>
{% endblock javascript %}
